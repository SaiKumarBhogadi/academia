{% extends 'super_admin/base.html' %}

{% block title %}Super Admin Dashboard{% endblock %}

{% block content %}
    <!-- Statistics Section -->
    <div class="mt-4">
        <h3>Overview</h3>
        <div class="row">
            <div class="col-6 col-md-3 mb-3">
                <div class="stat-card" style="background-color: #26a69a;">
                    <h1>{{ total_schools }}</h1>
                    <p>Total Schools</p>
                </div>
            </div>
            <div class="col-6 col-md-3 mb-3">
                <div class="stat-card" style="background-color: #ffca28;">
                    <h1>{{ total_colleges }}</h1>
                    <p>Total Colleges</p>
                </div>
            </div>
            <div class="col-6 col-md-3 mb-3">
                <div class="stat-card" style="background-color: #66bb6a;">
                    <h1>{{ total_students }}</h1>
                    <p>Total Students</p>
                </div>
            </div>
            <div class="col-6 col-md-3 mb-3">
                <div class="stat-card" style="background-color: #ef5350;">
                    <h1>{{ total_pending }}</h1>
                    <p>Total Pending Registrations</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Pending Approvals Section -->
    <div id="pending-approvals" class="mt-4">
        <h3>Pending Approvals</h3>
        <!-- Search Form for Pending Approvals -->
        <form method="get" class="search-form">
            <div class="input-group">
                <input type="text" name="search" class="form-control" placeholder="Search by username..." value="{{ search_query }}">
                <button type="submit" class="btn btn-primary">Search</button>
            </div>
        </form>
        <div class="card">
            <div class="card-body">
                <div class="table-container">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Username</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for user in pending_users %}
                                <tr>
                                    <td>{{ user.username }}</td>
                                    <td>{{ user.email }}</td>
                                    <td>{{ user.user_type }}</td>
                                    <td>
                                        <a href="{% url 'super_admin:approve_user' user.id %}" class="btn btn-success btn-sm">Approve</a>
                                    </td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="4">No pending approvals.</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Approved Users Section -->
    <div id="approved-users" class="mt-5">
        <h3>Approved Users</h3>
        <!-- Search Form for Approved Users -->
        <form method="get" class="search-form">
            <div class="input-group">
                <input type="text" name="search" class="form-control" placeholder="Search by username..." value="{{ search_query }}">
                <button type="submit" class="btn btn-primary">Search</button>
            </div>
        </form>

        <!-- Approved Schools -->
        <div class="card">
            <div class="card-body">
                <h5>Approved Schools</h5>
                <div class="table-container">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Username</th>
                                <th>Email</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for user in approved_schools %}
                                <tr>
                                    <td>{{ user.username }}</td>
                                    <td>{{ user.email }}</td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="2">No approved schools.</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Approved Colleges -->
        <div class="card">
            <div class="card-body">
                <h5>Approved Colleges</h5>
                <div class="table-container">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Username</th>
                                <th>Email</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for user in approved_colleges %}
                                <tr>
                                    <td>{{ user.username }}</td>
                                    <td>{{ user.email }}</td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="2">No approved colleges.</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Approved Super Admins -->
        <div class="card">
            <div class="card-body">
                <h5>Approved Super Admins</h5>
                <div class="table-container">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Username</th>
                                <th>Email</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for user in approved_super_admins %}
                                <tr>
                                    <td>{{ user.username }}</td>
                                    <td>{{ user.email }}</td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="2">No approved super admins.</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Approved Students -->
        <div class="card">
            <div class="card-body">
                <h5>Approved Students</h5>
                <div class="table-container">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Username</th>
                                <th>Email</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for user in approved_students %}
                                <tr>
                                    <td>{{ user.username }}</td>
                                    <td>{{ user.email }}</td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="2">No approved students.</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
{% endblock %}